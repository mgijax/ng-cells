/*! ng-cells 2016-04-13 Copyright 2013,2014 Guy de Pourtal√®s. Licensed under the Apache License, Version 2.0 */
!function(){var a=angular.module("ngcTableDirective",["ngc-template","ngSanitize","ngScrollable"]);a.directive("ngcTable",["$templateCache","$sce","$timeout","$parse",function(a,b,c,d){function e(){return{pre:function(a){function b(a,b,c){return angular.isArray(b)?c<b.length?a+":"+b[c]:a+":"+b[b.length-1]:angular.isDefined(b)?a+":"+b:""}function c(a,c,d){if(angular.isNumber(a))for(var e=0;a>e;e++)c.push({style:b("width",d,e)+";"+b("max-width",d,e)})}function d(a,c){return{index:c,height:b("height",a,c)+";"+b("max-height",a,c)}}function e(a){var b=a.showRows,c=a.rowNumber,e=a.rowHeights,f=a.defaultRowNumber||1,g=[];if(!b)return g;c=angular.isNumber(c)?c:f;for(var h=0;c>h;h++)g.push(d(e,h));return g}a.$$leftRowHeadersColumns=[],a.$$leftFixedColumns=[],c(angular.isNumber(a.leftColumnNumber)?a.leftColumnNumber:1,a.$$leftFixedColumns,a.leftColumnWidths),a.$$variableCenterColumns=[],c(angular.isNumber(a.centerColumnNumber)?a.centerColumnNumber:10,a.$$variableCenterColumns,a.centerColumnWidths),a.$$rightFixedColumns=[],c(angular.isNumber(a.rightColumnNumber)?a.rightColumnNumber:1,a.$$rightFixedColumns,a.rightColumnWidths),a.$$topLeftRowHeadersData=[],a.$$middleLeftRowHeadersData=[],a.$$bottomLeftRowHeadersData=[],a.$$leftColumnNames=[],a.$$centerColumnNames=[],a.$$rightColumnNames=[],a.$$scrollTopPosition=angular.isNumber(a.$$scrollTopPosition)?a.$$scrollTopPosition:0,a.$$scrollLeftPosition=angular.isNumber(a.$$scrollLeftPosition)?a.$$scrollLeftPosition:0,angular.isFunction(a.customDataValueFn)?a.$$getDataValue=a.customDataValueFn:a.$$getDataValue=function(a,b,c){return angular.isArray(a[b])?a[b][c]:void 0},a.$$topLeftData=[],a.$$topCenterData=[],a.$$topRightData=[],a.$$middleLeftData=[],a.$$middleCenterData=[],a.$$middleRightData=[],a.$$bottomLeftData=[],a.$$bottomCenterData=[],a.$$bottomRightData=[],a.$$scrollPosition={top:angular.isDefined(a.scrollTopPosition)?a.scrollTopPosition:0,left:angular.isDefined(a.scrollLeftPosition)?a.scrollLeftPosition:0},a.ranges=[],a.showColumnNames=angular.isDefined(a.showColumnNames)?a.showColumnNames:!0,a.showRowNumbers=angular.isDefined(a.showRowNumbers)?a.showRowNumbers:!0,a.showRowNumbers&&a.$$leftRowHeadersColumns.push({clazz:"row-number",rowNumberColumn:!0}),a.showHeader=angular.isDefined(a.showHeader)?a.showHeader:!0,a.$$headerRows=e({showRows:a.showHeader,rowNumber:a.headerRowNumber,rowHeights:a.headerRowHeights,defaultRowNumber:1}),a.showFilter=angular.isDefined(a.showFilter)?a.showFilter:!1,a.$$rows=e({showRows:!0,rowNumber:a.rowNumber,rowHeights:a.rowHeights,defaultRowNumber:10}),a.showFooter=angular.isDefined(a.showFooter)?a.showFooter:!0,a.$$footerRows=e({showRows:a.showFooter,rowNumber:a.footerRowNumber,rowHeights:a.footerRowHeights,defaultRowNumber:1})},post:function(a,e,f,g){function h(a){var b=a%26,c=String.fromCharCode(65+b);return a>25&&(c=h((a-b)/26-1)+c),c}function i(){return""}function j(a){return angular.isDefined(a)?a:"&nbsp;"}function k(a,b,c,d){return angular.isDefined(d)?String(d):"&nbsp;"}function l(a,c,d){var e="",f="",g=i,h=j,l=a.$$getDataValue(a.data,c,d),m=k,n=void 0,o=void 0,p={},q=[],r=["click","dblclick","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup"];angular.forEach(a.ranges,function(a){c>=a.top&&c<a.bottom&&d>=a.left&&d<a.right&&(q.push(a),angular.isFunction(a.formatFn)&&(h=a.formatFn),angular.isString(a.clazz)&&(e=a.clazz),angular.isString(a.style)&&(f=a.style),angular.isFunction(a.styleFn)&&(g=a.styleFn),angular.isFunction(a.customHtmlFn)&&(m=a.customHtmlFn),angular.isFunction(a.customTrustedHtmlFn)&&(n=a.customTrustedHtmlFn),angular.isDefined(a.customCellTemplate)&&(o=a.customCellTemplate),angular.forEach(r,function(b){angular.isFunction(a[b])&&(p[b]=a[b])}))});var s,t=h(l,c,d);return o&&angular.isFunction(o)&&(o=o(l,c,d,t,a)),null!=o&&""!=o||(s=angular.isDefined(n)?b.trustAsHtml(n(l,c,d,t)):m(l,c,d,t)),{row:c,col:d,data:l,value:t,clazz:e,style:g(l,c,d)+";"+f,eventCallbacks:p,enclosingRanges:q,customCellTemplate:o,customHTML:s}}function m(a,b,e){a.$$onVerticalScrollUpdate=!0;var f=a.data.length-a.$$headerRows.length-a.$$footerRows.length,g=f-a.$$middleCenterData.length,h=0;angular.isNumber(b)?h=b/a.$$contentHeight:angular.isNumber(e)&&(h=e/f);var i=Math.min(Math.ceil(f*Math.min(h,1)),g);a.$$scrollPosition.top=i,angular.isNumber(b)?d("scrollTopPosition").assign(a,i):angular.isNumber(e)&&(a.$$scrollTopPosition=h*a.$$contentHeight,a.$emit("content.reload")),c(function(){a.$$onVerticalScrollUpdate=!1})}function n(a,b,e){a.$$onHorizontalScrollUpdate=!0;var f=a.data[0].length-a.$$leftFixedColumns.length-a.$$rightFixedColumns.length,g=f-a.$$variableCenterColumns.length,h=0;angular.isNumber(b)?h=b/a.$$contentWidth:angular.isNumber(e)&&(h=e/f);var i=Math.min(Math.ceil(f*Math.min(h,1)),g);a.$$scrollPosition.left=i,angular.isNumber(b)?d("scrollLeftPosition").assign(a,i):angular.isNumber(e)&&(a.$$scrollLeftPosition=h*a.$$contentWidth,a.$emit("content.reload")),c(function(){a.$$onHorizontalScrollUpdate=!1})}a.$$dispatchEvent=function(a,b,c){c&&angular.isFunction(c.eventCallbacks[a])&&c.eventCallbacks[a](b,c)},a.$$setCenterColumnsData=function(b,c,d){var e;for(e=0;e<this.$$variableCenterColumns.length;e++)this.$$centerColumnNames[e]={value:h(e+this.$$leftFixedColumns.length+this.$$scrollPosition.left)};for(var f=0;b>f;f++){var g=f+d;for(c[f]=[],e=0;e<this.$$variableCenterColumns.length;e++){var i=e+this.$$leftFixedColumns.length+this.$$scrollPosition.left;c[f].push(l(a,g,i))}}},a.$$setLeftAndRightColumnsData=function(b,c,d,e,f){var g;for(g=0;g<this.$$leftFixedColumns.length;g++)this.$$leftColumnNames[g]={value:h(g)};var i=angular.isDefined(this.data[0])?this.data[0].length:0,j=Math.max(i-this.$$rightFixedColumns.length,this.$$leftFixedColumns.length+this.$$variableCenterColumns.length);for(g=0;g<this.$$rightFixedColumns.length;g++)this.$$rightColumnNames[g]={value:h(j+g)};for(var k=0;b>k;k++){var m=f+k;for(c[k]=[],c[k][this.$$leftRowHeadersColumns.length-1]={value:m+1},d[k]=[],g=0;g<this.$$leftFixedColumns.length;g++)d[k].push(l(a,m,g));for(e[k]=[],g=0;g<this.$$rightFixedColumns.length;g++)e[k].push(l(a,m,j+g))}},a.$$updateData=function(){this.$$setCenterColumnsData(this.$$headerRows.length,this.$$topCenterData,0),this.$$setLeftAndRightColumnsData(this.$$headerRows.length,this.$$topLeftRowHeadersData,this.$$topLeftData,this.$$topRightData,0),this.$$setCenterColumnsData(this.$$rows.length,this.$$middleCenterData,this.$$headerRows.length+this.$$scrollPosition.top),this.$$setLeftAndRightColumnsData(this.$$rows.length,this.$$middleLeftRowHeadersData,this.$$middleLeftData,this.$$middleRightData,this.$$headerRows.length+this.$$scrollPosition.top);var a=Math.max(this.data.length-this.$$footerRows.length,this.$$headerRows.length+this.$$rows.length);this.$$setCenterColumnsData(this.$$footerRows.length,this.$$bottomCenterData,a),this.$$setLeftAndRightColumnsData(this.$$footerRows.length,this.$$bottomLeftRowHeadersData,this.$$bottomLeftData,this.$$bottomRightData,a)},angular.isFunction(a.scrollFn)&&a.scrollFn(null,{top:a.$$headerRows.length,left:a.$$leftFixedColumns.length,direction:"none"}),a.$$updateData(),a.dataTotalRows=0,a.dataTotalCols=0,a.$watch("data",function(b,d){b!==d&&(b.length!==a.dataTotalRows||b[0].length!==a.dataTotalCols?(a.$emit("content.reload"),a.$$scrollPosition.top>b.length-a.$$headerRows.length-a.$$middleCenterData.length-a.$$footerRows.length&&m(a,null,b.length-a.$$headerRows.length-a.$$middleCenterData.length-a.$$footerRows.length),a.$$scrollPosition.left>a.data[0].length-a.$$leftFixedColumns.length-a.$$variableCenterColumns.length-a.$$rightFixedColumns.length&&n(a,null,b.length-a.$$leftFixedColumns.length-a.$$variableCenterColumns.length-a.$$rightFixedColumns.length),a.$$updateData()):c(function(){a.$$updateData()}))}),a.$$containerWidth=void 0,a.$$containerHeight=void 0,a.$$onVerticalScrollUpdate=!1,a.$$onHorizontalScrollUpdate=!1,a.$watch("scrollTopPosition",function(b,c){!a.$$onVerticalScrollUpdate&&angular.isNumber(b)&&angular.isNumber(c)&&b!==c&&!isNaN(b)&&b>=0&&(m(a,null,b),a.$$updateData())}),a.$watch("$$scrollTopPosition",function(b,c){angular.isNumber(b)&&angular.isNumber(c)&&b!==c&&!isNaN(b)&&b>=0&&(m(a,b,null),a.$$updateData())}),a.$watch("scrollLeftPosition",function(b,c){!a.$$onHorizontalScrollUpdate&&angular.isNumber(b)&&angular.isNumber(c)&&b!==c&&!isNaN(b)&&b>=0&&(n(a,null,b),a.$$updateData())}),a.$watch("$$scrollLeftPosition",function(b,c){angular.isNumber(b)&&angular.isNumber(c)&&b!==c&&!isNaN(b)&&b>=0&&(n(a,b,null),a.$$updateData())}),a.$on("scrollable.dimensions",function(b,c,d,e,f,g){if(e!=a.$$contentWidth||f!=a.$$contentHeight||c!=a.$$containerWidth||d!=a.$$containerHeight){a.dataTotalRows=a.data.length,a.dataTotalCols=a.data[0].length;var h=a.data.length-a.$$headerRows.length-a.$$footerRows.length,i=a.$$rows.length,j=a.data[0].length-a.$$leftFixedColumns.length-a.$$rightFixedColumns.length,k=a.$$variableCenterColumns.length,l=h/i,m=j/k;a.$$contentHeight=d*l,a.$$contentWidth=c*m,a.$$containerWidth=c,a.$$containerHeight=d,a.$emit("content.changed")}})}}}var f=["$scope",function(a){this.addRange=function(b){a.ranges.push(b)}}];return{scope:{customDataValueFn:"=?",data:"=",showColumnNames:"=?",showRowNumbers:"=?",showHeader:"=?",showFilter:"=?",showFooter:"=?",leftColumnNumber:"=?",leftColumnWidths:"=?",centerColumnNumber:"=",centerColumnWidths:"=?",rightColumnNumber:"=?",rightColumnWidths:"=?",headerRowNumber:"=?",headerRowHeights:"=?",rowNumber:"=?",rowHeights:"=?",footerRowNumber:"=?",footerRowHeights:"=?",scrollTopPosition:"=?",scrollLeftPosition:"=?",$$scrollTopPosition:"=?",$$scrollLeftPosition:"=?",$$contentHeight:"=?",$$contentWidth:"=?"},restrict:"AE",replace:!0,transclude:!0,template:a.get("ngc.table.tpl.html"),compile:e,controller:f}}]).directive("ngcRange",function(){return{require:"^ngcTable",restrict:"AE",scope:{top:"=",bottom:"=",left:"=",right:"=",formatFn:"=?",customHtmlFn:"=?",customTrustedHtmlFn:"=?",customCellTemplate:"=?",clazz:"=?",style:"=?",styleFn:"=?",clickFn:"=?",dblclickFn:"=?",keydownFn:"=?",keypressFn:"=?",keyupFn:"=?",mousedownFn:"=?",mouseenterFn:"=?",mouseleaveFn:"=?",mousemoveFn:"=?",mouseoverFn:"=?",mouseupFn:"=?"},link:function(a,b,c,d){d.addRange({top:a.top,bottom:a.bottom,left:a.left,right:a.right,formatFn:a.formatFn,clazz:a.clazz,styleFn:a.styleFn,style:a.style,customHtmlFn:a.customHtmlFn,customTrustedHtmlFn:a.customTrustedHtmlFn,customCellTemplate:a.customCellTemplate,click:a.clickFn,dblclick:a.dblclickFn,keydown:a.keydownFn,keypress:a.keypressFn,keyup:a.keyupFn,mousedown:a.mousedownFn,mouseenter:a.mouseenterFn,mouseleave:a.mouseleaveFn,mousemove:a.mousemoveFn,mouseover:a.mouseoverFn,mouseup:a.mouseupFn,touchstart:a.touchstartFn,touchmove:a.touchmoveFn,touchend:a.touchendFn})}}}).directive("extInclude",[function(){var a=["extInclude","scopeExtension"],b=function(a,b,c){a.$watch(b[c],function(b,d){b!==d&&(a[c]=b)},!0),a[c]=a.$eval(b[c])};return{restrict:"A",template:'<ng-include src="extInclude"></ng-include>',scope:!0,link:function(c,d,e){for(var f=0,g=a.length;g>f;f++)b(c,e,a[f])}}}])}(),angular.module("ngc-template",["ngc.table.tpl.html"]),angular.module("ngc.table.tpl.html",[]).run(["$templateCache",function(a){a.put("ngc.table.tpl.html",'<div class="ngc table">\n    <div ng-transclude style="display: hidden"></div>\n\n    <div class="ngc scroll-wrapper" ng-scrollable="{updateContentPosition:false, enableKinetic:false, wheelSpeed:1}"\n         spy-x="$$scrollLeftPosition"\n         spy-y="$$scrollTopPosition"\n         spy-custom-content-width="$$contentWidth"\n         spy-custom-content-height="$$contentHeight"\n            >\n        <table class="ngc">\n            <!-- Column Names -->\n            <tr class="ngc row column-names" ng-show="{{showColumnNames}}"  ng-class="{first: $first, last: $last}">\n                <!-- Cells for row headers columns -->\n                <td ng-repeat="column in $$leftRowHeadersColumns"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc row-header column-name cell {{column.clazz}}"\n                    style="{{column.style}}">\n                    <div class="ngc cell-content" style="{{column.style}}"></div>\n                </td>\n\n                <!-- Cells for left fixed columns -->\n                <td ng-repeat="column in $$leftFixedColumns"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc left column-name cell {{$$leftColumnNames[$index].clazz}} {{column.clazz}}"\n                    style="{{$$leftColumnNames[$index].style}}; {{column.style}}">\n                    <div class="ngc cell-content" style="{{column.style}}">{{$$leftColumnNames[$index].value}}</div>\n                </td>\n\n                <!-- Cells for middle variable columns -->\n                <td ng-repeat="column in $$variableCenterColumns"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc center column-name cell {{$$centerColumnNames[$index].clazz}} {{column.clazz}}"\n                    style="{{$$centerColumnNames[$index].style}}; {{column.style}}">\n                    <div class="ngc cell-content" style="{{column.style}}">{{$$centerColumnNames[$index].value}}</div>\n                </td>\n\n                <!-- Cells for right fixed columns -->\n                <td ng-repeat="column in $$rightFixedColumns"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc right column-name cell {{$$rightColumnNames[$index].clazz}} {{column.clazz}}"\n                    style="{{$$rightColumnNames[$index].style}}; {{column.style}}">\n                    <div class="ngc cell-content" style="{{column.style}}">{{$$rightColumnNames[$index].value}}</div>\n                </td>\n\n            </tr>\n\n            <!-- Headers -->\n            <tr class="ngc row header"  ng-show="{{showHeader}}" ng-repeat="row in $$headerRows" ng-class="{first: $first, last: $last}">\n                <!-- Cells for row headers columns -->\n                <td ng-repeat="column in $$leftRowHeadersColumns"\n                    ng-class="{first: $first, last: $last}"\n                     class="ngc row-header header cell {{$$topLeftRowHeadersData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                     style="{{$$topLeftRowHeadersData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content" style="{{row.height}}; {{column.style}}" >{{$$topLeftRowHeadersData[$parent.$index][$index].value}}</div>\n                </td>\n\n                <!-- Cells for left fixed columns -->\n                <td ng-repeat="column in $$leftFixedColumns"\n                    ng-click="$$dispatchEvent(\'click\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-keydown="$$dispatchEvent(\'keydown\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-keypress="$$dispatchEvent(\'keypress\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-keyup="$$dispatchEvent(\'keyup\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$topLeftData[$parent.$index][$index])"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc left header cell {{$$topLeftData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$topLeftData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$topLeftData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$topLeftData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$topLeftData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$topLeftData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$topLeftData[row.index][$index]}"></div>\n                </td>\n\n                <!-- Cells for middle variable columns -->\n                <td ng-repeat="column in $$variableCenterColumns"\n                    ng-click="$$dispatchEvent(\'click\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-keydown="$$dispatchEvent(\'keydown\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-keypress="$$dispatchEvent(\'keypress\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-keyup="$$dispatchEvent(\'keyup\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$topCenterData[$parent.$index][$index])"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc center header cell {{$$topCenterData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$topCenterData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$topCenterData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$topCenterData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$topCenterData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$topCenterData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$topCenterData[row.index][$index]}"></div>\n                </td>\n\n                <!-- Cells for right fixed columns -->\n                <td ng-repeat="column in $$rightFixedColumns"\n                    ng-click="$$dispatchEvent(\'click\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-keydown="$$dispatchEvent(\'keydown\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-keypress="$$dispatchEvent(\'keypress\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-keyup="$$dispatchEvent(\'keyup\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$topRightData[$parent.$index][$index])"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc right header cell {{$$topRightData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$topRightData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$topRightData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$topRightData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$topRightData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$topRightData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$topRightData[row.index][$index]}"></div>\n                </td>\n\n\n            </tr>\n\n            <!-- Middle -->\n            <tr class="ngc row middle" ng-repeat="row in $$rows" ng-class="{first: $first, last: $last}">\n                <!-- Cells for row headers columns -->\n                <td ng-repeat="column in $$leftRowHeadersColumns"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc row-header middle cell {{$$middleLeftRowHeadersData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$middleLeftRowHeadersData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content" style="{{row.height}}; {{column.style}}">{{$$middleLeftRowHeadersData[$parent.$index][$index].value}}</div>\n                </td>\n\n                <!-- Cells for left fixed columns -->\n                <td ng-repeat="column in $$leftFixedColumns"\n                    ng-click="$$dispatchEvent(\'click\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-keydown="$$dispatchEvent(\'keydown\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-keypress="$$dispatchEvent(\'keypress\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-keyup="$$dispatchEvent(\'keyup\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$middleLeftData[$parent.$index][$index])"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc left middle cell {{$$middleLeftData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$middleLeftData[$parent.$index][$index].style}} ; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$middleLeftData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$middleLeftData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$middleLeftData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$middleLeftData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$middleLeftData[row.index][$index]}"></div>\n                </td>\n\n                <!-- Cells for middle variable columns -->\n                <td ng-repeat="column in $$variableCenterColumns"\n                    ng-click="$$dispatchEvent(\'click\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-keydown="$$dispatchEvent(\'keydown\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-keypress="$$dispatchEvent(\'keypress\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-keyup="$$dispatchEvent(\'keyup\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$middleCenterData[$parent.$index][$index])"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc center cell middle {{$$middleCenterData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$middleCenterData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$middleCenterData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$middleCenterData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$middleCenterData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$middleCenterData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$middleCenterData[row.index][$index]}"></div>\n                </td>\n\n                <!-- Cells for right fixed columns -->\n                <td ng-repeat="column in $$rightFixedColumns"\n                    ng-click="$$dispatchEvent(\'click\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-keydown="$$dispatchEvent(\'keydown\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-keypress="$$dispatchEvent(\'keypress\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-keyup="$$dispatchEvent(\'keyup\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$middleRightData[$parent.$index][$index])"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc right cell middle {{$$middleRightData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$middleRightData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$middleRightData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$middleRightData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$middleRightData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$middleRightData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$middleRightData[row.index][$index]}"></div>\n                </td>\n\n            </tr>\n\n            <!-- Bottom -->\n            <tr class="ngc row footer" ng-repeat="row in $$footerRows" ng-class="{first: $first, last: $last}">\n                <!-- Cells for row headers columns -->\n                <td ng-repeat="column in $$leftRowHeadersColumns"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc row-header footer cell {{$$bottomLeftRowHeadersData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$bottomLeftRowHeadersData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content" style="{{row.height}}; {{column.style}}">{{$$bottomLeftRowHeadersData[$parent.$index][$index].value}}</div>\n                </td>\n\n                <!-- Cells for left fixed columns -->\n                <td  ng-repeat="column in $$leftFixedColumns"\n                     ng-click="$$dispatchEvent(\'click\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-keydown="$$dispatchEvent(\'keydown\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-keypress="$$dispatchEvent(\'keypress\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-keyup="$$dispatchEvent(\'keyup\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$bottomLeftData[$parent.$index][$index])"\n                     ng-class="{first: $first, last: $last}"\n                     class="ngc left footer cell {{$$bottomLeftData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                     style="{{$$bottomLeftData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$bottomLeftData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$bottomLeftData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$bottomLeftData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$bottomLeftData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$bottomLeftData[row.index][$index]}"></div>\n                </td>\n\n                <!-- Cells for middle variable columns -->\n                <td ng-repeat="column in $$variableCenterColumns"\n                    ng-click="$$dispatchEvent(\'click\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-keydown="$$dispatchEvent(\'keydown\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-keypress="$$dispatchEvent(\'keypress\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-keyup="$$dispatchEvent(\'keyup\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$bottomCenterData[$parent.$index][$index])"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc center footer cell {{$$bottomCenterData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$bottomCenterData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$bottomCenterData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$bottomCenterData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$bottomCenterData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$bottomCenterData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$bottomCenterData[row.index][$index]}"></div>\n                </td>\n\n                <!-- Cells for right fixed columns -->\n                <td ng-repeat="column in $$rightFixedColumns"\n                    ng-click="$$dispatchEvent(\'click\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-dblclick="$$dispatchEvent(\'dblclick\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-keydown="$$dispatchEvent(\'keydown\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-keypress="$$dispatchEvent(\'keypress\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-keyup="$$dispatchEvent(\'keyup\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-mousedown="$$dispatchEvent(\'mousedown\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-mouseleave="$$dispatchEvent(\'mouseleave\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-mouseenter="$$dispatchEvent(\'mouseenter\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-mousemove="$$dispatchEvent(\'mousemove\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-mouseover="$$dispatchEvent(\'mouseover\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-mouseup="$$dispatchEvent(\'mouseup\', $event, $$bottomRightData[$parent.$index][$index])"\n                    ng-class="{first: $first, last: $last}"\n                    class="ngc right footer cell {{$$bottomRightData[$parent.$index][$index].clazz}} {{column.clazz}}"\n                    style="{{$$bottomRightData[$parent.$index][$index].style}}; {{row.height}}; {{column.style}}">\n                    <div class="ngc cell-content ngc-custom-html" style="{{row.height}}; {{column.style}}"\n                         ng-if="!$$bottomRightData[$parent.$index][$index].customCellTemplate"\n                         ng-bind-html="$$bottomRightData[$parent.$parent.$index][$index].customHTML"></div>\n                    <div class="ngc cell-content ngc-custom-cell-template" style="{{row.height}}; {{column.style}}"\n                         ng-if="$$bottomRightData[$parent.$index][$index].customCellTemplate"\n                         ext-include="$$bottomRightData[row.index][$index].customCellTemplate"\n                         scope-extension="{\'rawCellData\': $$bottomRightData[row.index][$index]}"></div>\n                </td>\n\n            </tr>\n        </table>\n    </div>\n</div>');
}]),angular.module("ngScrollable",[]).directive("ngScrollable",["$injector",function(a){"use strict";var b=a.get("$document"),c=a.get("$interval"),d=a.get("$timeout"),e=a.get("$window"),f=a.get("$parse"),g=angular.bind,h=angular.extend,i=angular.element,j=(angular.isDefined,"undefined"!=typeof e.ontouchstart),k="transform",l=e.requestAnimationFrame||e.webkitRequestAnimationFrame,m=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;["webkit","moz","o","ms"].every(function(a){var c=a+"Transform",d=b.find("body").eq(0);return"undefined"!=typeof d[0].style[c]?(k=c,!1):!0});var n={id:0,scrollX:"bottom",scrollY:"right",scrollXSlackSpace:0,scrollYSlackSpace:0,scrollXAlways:!1,scrollYAlways:!1,usePadding:!1,useObserver:!0,wheelSpeed:1,minSliderLength:10,useBothWheelAxes:!1,useKeyboard:!0,preventKeyEvents:!0,updateOnResize:!0,kineticTau:325,spyMargin:1};return{restrict:"A",transclude:!0,template:"<div class=\"scrollable\"><div class=\"scrollable-content\" ng-transclude></div><div class='scrollable-bar scrollable-bar-x'><div class='scrollable-slider'></div></div><div class='scrollable-bar scrollable-bar-y'><div class='scrollable-slider'></div></div></div>",link:function(a,o,p){var q,r,s,t,u,v=h({},n,a.$eval(p.ngScrollable)),w=i(o.children()[0]),x={window:i(e),el:w,content:i(w.children()[0]),barX:i(w.children()[1]),barY:i(w.children()[2]),sliderX:i(i(w.children()[1]).children()[0]),sliderY:i(i(w.children()[2]).children()[0])},y=!1,z=!1,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=null,L=null,M=null,N=null,O=!1,P=!1,Q=!1,R={},S=1,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,_=function(a){return a.toFixed(3)+"px"},aa=function(a,b,c){return Math.max(b,Math.min(a,c))},ba=function(){var b=a.$root?a.$root.$$phase:a.$$phase;"$apply"!==b&&"$digest"!==b&&a.$digest()},ca=function(){var a=A-3;y||v.scrollXAlways?(G=Math.max(v.minSliderLength,parseInt(a*a/C,10)),H=parseInt(F*(a-G)/(C-a),10),H>=a-G?H=a-G:0>H&&(H=0),x.sliderX[0].style[k]="translate3d("+_(H)+",0,0)",x.sliderX[0].style.width=_(G)):(G=H=0,x.sliderX[0].style[k]="translate3d(0,0,0)",x.sliderX[0].style.width="0")},da=function(){var a=B-3;z||v.scrollYAlways?(I=Math.max(v.minSliderLength,parseInt(a*a/D,10)),J=parseInt(E*(a-I)/(D-a),10),J>=a-I?J=a-I:0>J&&(J=0),x.sliderY[0].style[k]="translate3d(0,"+_(J)+",0)",x.sliderY[0].style.height=_(I)):(J=I=0,x.sliderY[0].style[k]="translate3d(0,0,0)",x.sliderY[0].style.height="0")},ea=function(){var a=v.scrollXAlways,b={left:0,width:_(A),display:y||a?"inherit":"none"};switch(v.scrollX){case"bottom":b.bottom=0,x.content[y||a?"addClass":"removeClass"]("scrollable-bottom"),x.barX[y||a?"addClass":"removeClass"]("scrollable-bottom");break;case"top":b.top=0,x.content[y||a?"addClass":"removeClass"]("scrollable-top"),x.barX[y||a?"addClass":"removeClass"]("scrollable-top")}x.barX.css(b),x.sliderX[0].style.display=y||a?"inherit":"none"},fa=function(){var a=v.scrollYAlways,b={top:0,height:_(B),display:z||a?"inherit":"none"};switch(v.scrollY){case"right":b.right=0,x.content[z||a?"addClass":"removeClass"]("scrollable-right"),x.barY[z||a?"addClass":"removeClass"]("scrollable-right");break;case"left":b.left=0,x.content[z||a?"addClass":"removeClass"]("scrollable-left"),x.barY[z||a?"addClass":"removeClass"]("scrollable-left")}x.barY.css(b),x.sliderY[0].style.display=z||a?"inherit":"none"},ga=function(){var b=!1;R.spyX&&(R.spyX(a,parseInt(F,10)),b=!0),R.spyY&&(R.spyY(a,parseInt(E,10)),b=!0),b&&ba()},ha=function(b,c){var d=E,e=F;E=aa(c,0,D-B),F=aa(b,0,C-A),x.content[0].style[k]="translate3d("+_(-F)+","+_(-E)+",0)",a.$applyAsync(ga),E<B*v.spyMargin&&d>=B*v.spyMargin&&a.$broadcast("scrollable.spytop",E,v.id),E>D-B*(v.spyMargin+1)&&d<=D-B*(v.spyMargin+1)&&a.$broadcast("scrollable.spybottom",E,v.id),F<A*v.spyMargin&&e>=A*v.spyMargin&&a.$broadcast("scrollable.spyleft",F,v.id),F>C-A*(v.spyMargin+1)&&e<=C-A*(v.spyMargin+1)&&a.$broadcast("scrollable.spyright",F,v.id)},ia=function(a){y&&(ha(a,E),ca())},ja=function(a){z&&(ha(F,a),da())},ka=function(b,c){A=v.usePadding?x.el[0].clientWidth:x.el[0].offsetWidth,B=v.usePadding?x.el[0].clientHeight:x.el[0].offsetHeight,C=x.content[0].scrollWidth,D=x.content[0].scrollHeight,S=parseFloat(x.window[0].getComputedStyle(x.el[0],null).getPropertyValue("font-size")),"none"!==v.scrollX&&A+v.scrollXSlackSpace<C?y=!0:(ia(0),y=!1),"none"!==v.scrollY&&B+v.scrollYSlackSpace<D?z=!0:(ja(0),z=!1),ea(),fa(),ca(),da(),F+H+G>C&&ia(H),E+J+I>D&&ja(J),c||a.$broadcast("scrollable.dimensions",A,B,C,D,v.id)},la=function(a,b){return a.stopPropagation(),b&&a.preventDefault(),!1},ma=function(a){return a=a.originalEvent||a,a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].pageY:a.pageY},na=function(a){return a=a.originalEvent||a,a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].pageX:a.pageX},oa=function(){var a,b,c,d;a=Date.now(),b=a-t,t=a,c=F-V,V=F,d=1e3*c/(1+b),T=.8*d+.2*T,c=E-Z,Z=E,d=1e3*c/(1+b),X=.8*d+.2*X},pa=function(){var a,b;U&&(a=Date.now()-t,b=-U*Math.exp(-a/v.kineticTau),b>.5||-.5>b?(ia(W+b),l(pa)):ia(W))},qa=function(){var a,b;Y&&(a=Date.now()-t,b=-Y*Math.exp(-a/v.kineticTau),b>.5||-.5>b?(ja($+b),l(qa)):ja($))},ra=function(a){return L=na(a),K=F,O=!0,T=U=0,V=F,b.on("mousemove",sa),b.on("mouseup",ta),j&&!u&&(u=c(oa,50)),x.el.addClass("active"),j||la(a,!0)},sa=function(a){if(O){var b=na(a)-L,c=j?-b:parseInt(b*(C-A)/(A-G),10);return l(g(null,ia,K+c)),la(a,!0)}},ta=function(a){return O&&(b.off("mousemove",sa),b.off("mouseup",ta),O=!1,x.el.removeClass("active"),K=L=null),u&&(c.cancel(u),u=null),(T>10||-10>T)&&(U=.8*T,W=Math.round(F+U),t=Date.now(),l(pa)),j||la(a,!0)},ua=function(a){return N=ma(a),M=E,P=!0,X=Y=0,Z=E,b.on("mousemove",va),b.on("mouseup",wa),j&&!u&&(u=c(oa,50)),x.el.addClass("active"),j||la(a,!0)},va=function(a){if(P){var b=ma(a)-N,c=j?-b:parseInt(b*(D-B)/(B-I),10);return l(g(null,ja,M+c)),j||la(a,!0)}},wa=function(a){return P&&(b.off("mousemove",va),b.off("mouseup",wa),P=!1,x.el.removeClass("active"),M=N=null),u&&(c.cancel(u),u=null),(X>10||-10>X)&&(Y=.8*X,$=Math.round(E+Y),t=Date.now(),l(qa)),j||la(a,!0)},xa=function(a){var b=parseInt(G/2,10),c=a.clientX-x.barX[0].getBoundingClientRect().left-b,d=A-G,e=aa(c/d,0,1);l(g(null,ia,(C-A)*e))},ya=function(a){var b=parseInt(I/2,10),c=a.clientY-x.barY[0].getBoundingClientRect().top-b,d=B-I,e=aa(c/d,0,1);l(g(null,ja,(D-B)*e))},za=function(){Q=!0},Aa=function(){Q=!1},Ba=function(a){var c=0,d=0,e=30;if(!(!Q||b[0].activeElement.isContentEditable||"INPUT"===b[0].activeElement.nodeName||a.altKey||a.ctrlKey||a.metaKey)){switch(a.which){case 37:c=-e;break;case 38:d=e;break;case 39:c=e;break;case 40:d=-e;break;case 33:d=B;break;case 32:case 34:d=-B;break;case 35:z&&!y?d=-D:c=B;break;case 36:z&&!y?d=D:c=-B;break;default:return}l(g(null,ja,E-d)),l(g(null,ia,F+c)),v.preventKeyEvents&&a.preventDefault()}},Ca=function(a){var b=a.explicitOriginalTarget||a.target;if(!b)return!1;if(b.isContentEditable)return b.scrollHeight>b.clientHeight+b.clientTop+10;for(;b;){if(b.className&&"string"==typeof b.className&&b.className.indexOf("scrollable-ignore")>-1)return!0;b=b.parentNode}return!1},Da=function(){var a=Date.now()-s;500>a?r=d(Da,500-a):(x.el.removeClass("active"),r=null)},Ea=function(a){return 0>=F+a||F+a>=C-A},Fa=function(a){return 0>=E+a||E+a>=D-B},Ga=function(a){if(a=a.originalEvent||a,!Ca(a)){var b=a.deltaMode?S:1,c=a.deltaX*b*v.wheelSpeed,e=a.deltaY*b*v.wheelSpeed,f=!0;if(a.shiftKey){var h=e;e=c,c=h}s=Date.now(),r||(x.el.addClass("active"),r=d(Da,500)),v.useBothWheelAxes?z&&!y?e?(l(g(null,ja,E+e)),f=!Fa(e)):(l(g(null,ja,E+c)),f=!Fa(c)):y&&!z&&(c?(l(g(null,ia,F+c)),f=!Ea(c)):(l(g(null,ia,F+e)),f=!Ea(e))):(l(g(null,ja,E+e)),l(g(null,ia,F+c)),z&&(f=!Fa(0))),f&&la(a,!0)}},Ha=function(a){var b=x.el[0].scrollTop,c=x.el[0].scrollLeft;b&&l(g(null,ja,E+b+2)),c&&l(g(null,ia,F+c+2)),x.el[0].scrollTop=x.el[0].scrollLeft=0,la(a,!0)},Ia=function(){if(v.useObserver&&m){var a={childList:!0,subtree:!0};q=new m(function(){l(ka)}),q.observe(x.content[0],a)}v.updateOnResize&&x.window.on("resize",ka),"none"!==v.scrollX&&(x.sliderX.on("click",la),x.barX.on("click",xa),x.sliderX.on("mousedown",ra),j&&(x.el.on("touchstart",ra),x.el.on("touchmove",sa),x.el.on("touchend",ta))),"none"!==v.scrollY&&(x.sliderY.on("click",la),x.barY.on("click",ya),x.sliderY.on("mousedown",ua),j&&(x.el.on("touchstart",ua),x.el.on("touchmove",va),x.el.on("touchend",wa))),x.el.on("wheel",Ga),x.el.on("scroll",Ha),v.useKeyboard&&(x.el.on("mouseenter",za),x.el.on("mouseleave",Aa),b.on("keydown",Ba))},Ja=function(){q&&(q.disconnect(),q=null),v.updateOnResize&&x.window.off("resize",ka),x.sliderX.off("click",la),x.barX.off("click",xa),x.sliderY.off("click",la),x.barY.off("click",ya),j&&(x.el.off("touchstart",ra),x.el.off("touchmove",sa),x.el.off("touchend",ta),x.el.off("touchstart",ua),x.el.off("touchmove",va),x.el.off("touchend",wa)),x.sliderX.off("mousedown",ra),b.off("mousemove",sa),b.off("mouseup",ta),x.sliderY.off("mousedown",ua),b.off("mousemove",va),b.off("mouseup",wa),v.useKeyboard&&(x.el.off("mouseenter",za),x.el.off("mouseleave",Aa),b.off("keydown",Ba)),x.el.off("wheel",Ga),x.el.off("scroll",Ha)};a.$on("content.reload",function(a,b){Ja(),d(function(){x.el=i(o.children()[0]),x.content=i(x.el.children()[0]),Ia(),ka(a,b)})}),a.$on("content.changed",function(a,b,c){b=b||100,d(function(){ka(a,c)},b),a.preventDefault()}),a.$on("scrollable.scroll.left",function(){a.$applyAsync(function(){ia(0)})}),a.$on("scrollable.scroll.right",function(){a.$applyAsync(function(){ia(C)})}),a.$on("scrollable.scroll.top",function(){a.$applyAsync(function(){ja(0)})}),a.$on("scrollable.scroll.bottom",function(){a.$applyAsync(function(){ja(D)})}),a.$on("$destroy",function(){d.cancel(r),Ja()}),Ia(),ka(),angular.forEach(["spyX","spyY"],function(b){p[b]&&(R[b]=f(p[b]).assign,a.$watch(p[b],function(a){switch(a=a||0,b){case"spyX":ia(a);break;case"spyY":ja(a)}}))})}}}]);